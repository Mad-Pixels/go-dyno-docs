# –û–ø–∏—Å–∞–Ω–∏–µ JSON-—Å—Ö–µ–º—ã

## üìê –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

JSON —Å—Ö–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤:

1. `table_name` - –∏–º—è DynamoDB —Ç–∞–±–ª–∏—Ü—ã
2. `hash_key` / `range_key` - –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏ —Ç–∞–±–ª–∏—Ü—ã
3. `attributes` - –∫–ª—é—á–µ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤
4. `common_attributes` - –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—è –¥–∞–Ω–Ω—ã—Ö
5. `secondary_indexes` - –≤—Ç–æ—Ä–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (GSI/LSI)

## üßæ –ü—Ä–∏–º–µ—Ä—ã

::: code-group
<<< @/snippets/v0.0.1/ref_json/basic.json{json}
<<< @/snippets/v0.0.1/ref_json/full.json{json}
<<< @/snippets/v0.0.1/ref_json/overwrite_subtypes.json{json}
<<< @/snippets/v0.0.1/ref_json/composite_keys.json{json}
:::

## üîí –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

### `table_name`

> **–¢–∏–ø:** `string`  
> **–ü—Ä–∏–º–µ—Ä:** `"user_profiles"`
> ::: info –õ–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–º—è DynamoDB —Ç–∞–±–ª–∏—Ü—ã.
> –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

- –ò–º–µ–Ω–∏ Go –ø–∞–∫–µ—Ç–∞ (–≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ)
- –ò–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ (table_name.go)
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã TableName –≤ –∫–æ–¥–µ
  :::
  ::: warning –ø–∞–∫–µ—Ç `userprofiles`, —Ñ–∞–π–ª `userprofiles.go`
  :::

<br>

### `hash_key`

> **–¢–∏–ø:** `string`  
> **–ü—Ä–∏–º–µ—Ä:** `"user_id"`
> ::: info –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —Ä–∞–∑–¥–µ–ª–∞ (partition key) DynamoDB —Ç–∞–±–ª–∏—Ü—ã.
> –î–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –æ–¥–∏–Ω –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏–∑ –º–∞—Å—Å–∏–≤–∞ `attributes`.
> :::

<br>

### `attributes`

> **–¢–∏–ø:** `array of objects`  
> **–ü—Ä–∏–º–µ—Ä:** `{"name": "user_id", "type": "S"}`
> ::: info –ú–∞—Å—Å–∏–≤ –∫–ª—é—á–µ–≤—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
> –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∫–ª—é—á–∞—Ö –∏ –∏–Ω–¥–µ–∫—Å–∞—Ö.
> :::

#### –°–æ—Å—Ç–æ–∏—Ç –∏–∑:

- `name`
  > **–¢–∏–ø:** `string`  
  > **–ü—Ä–∏–º–µ—Ä:** `"user_id"`
  > ::: info –ò–º—è –∞—Ç—Ä–∏–±—É—Ç–∞
  > –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≤—Å–µ—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü—ã.
  > :::
- `type`
  > **–¢–∏–ø:** `string`  
  > **–ü—Ä–∏–º–µ—Ä:** `"S"`
  > ::: info DynamoDB —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
  > | DynamoDB —Ç–∏–ø | Go —Ç–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
  > |--------------|--------|-----------|
  > | `"S"` | `string` | –°—Ç—Ä–æ–∫–∞ |
  > | `"N"` | `int64` | –ß–∏—Å–ª–æ |
  > | `"BOOL"` | `bool` | –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ |
  > | `"SS"` | `[]string` | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ |
  > | `"NS"` | `[]int` | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —á–∏—Å–µ–ª |
  > | `"string"` | `string` | –ê–ª–∏–∞—Å –¥–ª—è "S" |
  > | `"number"` | `int64` | –ê–ª–∏–∞—Å –¥–ª—è "N" |
  > | `"boolean"` | `bool` | –ê–ª–∏–∞—Å –¥–ª—è "BOOL" |
  > :::
- `subtype`

  > **–¢–∏–ø:** `string` _(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ)_  
  > **–ü—Ä–∏–º–µ—Ä:** `"uint64"`
  > ::: info –£—Ç–æ—á–Ω—è–µ—Ç Go —Ç–∏–ø
  > _–ü—Ä–∏–º–µ–Ω–∏–º–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–∏–ø–æ–≤ `"N"` –∏ `"NS"`_

  | DynamoDB —Ç–∏–ø | Subtype     | Go —Ç–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                           |
  | ------------ | ----------- | ----------- | ---------------------------------- |
  | `"N"`        | `"int32"`   | `int32`     | 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ                    |
  | `"N"`        | `"int64"`   | `int64`     | 64-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)     |
  | `"N"`        | `"float32"` | `float32`   | 32-–±–∏—Ç–Ω–æ–µ —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π |
  | `"N"`        | `"uint64"`  | `uint64`    | 64-–±–∏—Ç–Ω–æ–µ –±–µ–∑–∑–Ω–∞–∫–æ–≤–æ–µ —Ü–µ–ª–æ–µ        |
  | `"N"`        | `"int16"`   | `int16`     | 16-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ                    |
  | `"NS"`       | `"int32"`   | `[]int32`   | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ 32-–±–∏—Ç–Ω—ã—Ö —Ü–µ–ª—ã—Ö          |
  | `"NS"`       | `"int64"`   | `[]int64`   | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ 64-–±–∏—Ç–Ω—ã—Ö —Ü–µ–ª—ã—Ö          |
  | `"NS"`       | `"float32"` | `[]float32` | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π |
  | `"NS"`       | `"uint64"`  | `[]uint64`  | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã—Ö —Ü–µ–ª—ã—Ö        |
  | `"NS"`       | `"int16"`   | `[]int16`   | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ 16-–±–∏—Ç–Ω—ã—Ö —Ü–µ–ª—ã—Ö          |

  :::

## üîì –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

### `range_key`

> **–¢–∏–ø:** `string`  
> **–ü—Ä–∏–º–µ—Ä:** `"timestamp"`
> ::: info –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (sort key) DynamoDB —Ç–∞–±–ª–∏—Ü—ã.
> –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω, –¥–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –æ–¥–∏–Ω –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏–∑ –º–∞—Å—Å–∏–≤–∞ `attributes`.
> :::

<br>

### `common_attributes`

> **–¢–∏–ø:** `array of objects`  
> **–ü—Ä–∏–º–µ—Ä:** `{"name": "email", "type": "S"}`
> ::: info –ú–∞—Å—Å–∏–≤ –æ–±—ã—á–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
> –≠—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç—ã –ù–ï –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –∫–ª—é—á–∞—Ö –∏–Ω–¥–µ–∫—Å–æ–≤, —Ç–æ–ª—å–∫–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
> :::
> ::: warning –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ `attributes`
> :::

<br>

### `secondary_indexes`

> **–¢–∏–ø:** `array of objects`  
> ::: info –ú–∞—Å—Å–∏–≤ –≤—Ç–æ—Ä–∏—á–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ (`GSI` –∏ `LSI`) –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤.
> :::

#### –°–æ—Å—Ç–æ–∏—Ç –∏–∑:

- `name`
  > **–¢–∏–ø:** `string`  
  > **–ü—Ä–∏–º–µ—Ä:** `"user_id"`
  > ::: info –ò–º—è –∞—Ç—Ä–∏–±—É—Ç–∞
  > –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –∏–Ω–¥–µ–∫—Å–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–∞–±–ª–∏—Ü—ã.
  > :::
- `type`
  > **–¢–∏–ø:** `string`  
  > **–ü—Ä–∏–º–µ—Ä:** `"GSI"`
  > ::: info –¢–∏–ø –∏–Ω–¥–µ–∫—Å–∞
  - **GSI** (Global Secondary Index) - –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ª—é–±–æ–π hash_key
  - **LSI** (Local Secondary Index) - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç hash_key –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
    :::
- `hash_key`
  > **–¢–∏–ø:** `string`  
  > **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** –î–ª—è GSI - –¥–∞, –¥–ª—è LSI - –Ω–µ—Ç
  > ::: info –ö–ª—é—á —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞
  > –î–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –∞—Ç—Ä–∏–±—É—Ç –∏–∑ `attributes` –∏ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç range_key –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã (–¥–ª—è LSI).
  > :::
- `projection_type`
  > **–¢–∏–ø:** `string`  
  > **–ó–Ω–∞—á–µ–Ω–∏—è:** `"ALL"`, `"KEYS_ONLY"`, `"INCLUDE"`
  > ::: info –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤–∫–ª—é—á–µ–Ω—ã –≤ –∏–Ω–¥–µ–∫—Å
  - **ALL** - –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
  - **KEYS_ONLY** - —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏–Ω–¥–µ–∫—Å–∞ –∏ —Ç–∞–±–ª–∏—Ü—ã
  - **INCLUDE** - –∫–ª—é—á–∏ + –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ `non_key_attributes`
    :::
- `non_key_attributes`
  > **–¢–∏–ø:** `array of strings`  
  > **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** –¢–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ `projection_type` = `"INCLUDE"`
  > ::: info –°–ø–∏—Å–æ–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ –∏–Ω–¥–µ–∫—Å
  > :::
- `read_capacity` –∏ `write_capacity`
  > **–¢–∏–ø:** `integer`  
  > **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π:** –ù–µ—Ç  
  > ::: info –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è GSI
  > _LSI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã._
  > :::
  > ::: warning **–¢–æ–ª—å–∫–æ –¥–ª—è:** GSI
  > :::

## üîë –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ –∫–ª—é—á–∏

```json
{
  "name": "user_status_index",
  "type": "GSI",
  "hash_key": "user_id#status",
  "range_key": "created_at"
}
```

::: warning –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∫–ª—é—á `user_id#status` —Å–æ–∑–¥–∞–µ—Ç –∫–ª—é—á –∏–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ `user_id` –∏ `status`.
:::

## üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è

GoDyno –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

- –í—Å–µ –∫–ª—é—á–∏ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω –∏–Ω–¥–µ–∫—Å–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –ø—Ä–æ–µ–∫—Ü–∏–∏
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `non_key_attributes` —Ç–∏–ø—É –ø—Ä–æ–µ–∫—Ü–∏–∏ `INCLUDE`
- LSI –∏–º–µ–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π `range_key`
- GSI –∏–º–µ–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π `hash_key`
- Range key LSI –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç range key —Ç–∞–±–ª–∏—Ü—ã
  ::: info –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã.
  :::
